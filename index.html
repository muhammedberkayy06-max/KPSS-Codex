<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KPSS Dijital KoÃ§ â€“ Ultimate</title>
  <meta name="theme-color" content="#0A84FF">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="bg"></div>
  <header class="topbar">
    <div class="brand">
      <div class="logo">K</div>
      <div class="title">
        <div class="h1">KPSS Dijital KoÃ§</div>
        <div class="sub">Ultimate Â· Apple tarzÄ± Â· Tailwind</div>
      </div>
    </div>
    <div class="top-actions">
      <button id="btnHome" class="chip">ğŸ  Ana sayfa</button>
      <button id="btnInstall" class="chip" style="display:none">ğŸ“± Ana ekrana ekle</button>
      <button id="btnUpdate" class="chip">âš¡ GÃ¼ncellemeleri denetle</button>
      <button id="btnExport" class="chip">ğŸ—‚ï¸ Verileri indir</button>
    </div>
  </header>

  <main class="container space-y-6">
    <div id="loadStatus" class="notice" hidden></div>

    <div id="alertBox" class="notice flex items-start gap-3" hidden>
      <div class="flex-1" id="alertText"></div>
      <button id="alertClose" class="chip">Kapat</button>
    </div>

    <section id="setupCard" class="card space-y-5">
      <div class="flex items-center justify-between gap-4 flex-wrap">
        <div class="flex flex-col">
          <p class="text-sm text-slate-500 font-semibold uppercase">BaÅŸlangÄ±Ã§</p>
          <h2 class="text-2xl font-extrabold">Ders & Mod SeÃ§imi</h2>
        </div>
        <div class="seg">
          <button class="seg-btn active" data-mode="single">Tek Ders</button>
          <button class="seg-btn" data-mode="gkgy">GK-GY</button>
          <button class="seg-btn" data-mode="a">A Grubu</button>
        </div>
      </div>

      <div class="grid gap-4 md:grid-cols-2" id="fieldLesson">
        <div class="field">
          <label for="lessonSelect">Ders</label>
          <select id="lessonSelect" class="w-full"></select>
          <p class="hint">Soru bankasÄ± otomatik yÃ¼klenir.</p>
        </div>
        <div class="field">
          <label for="countInput">Soru SayÄ±sÄ±</label>
          <input id="countInput" type="number" min="5" max="300" value="10" class="w-full">
          <p id="countHint" class="hint">Tek ders pratik: 5-300 arasÄ± seÃ§ebilirsin.</p>
        </div>
      </div>

      <div class="grid gap-4 md:grid-cols-3">
        <div class="field">
          <label for="goal">Hedef</label>
          <select id="goal">
            <option value="speed">HÄ±z</option>
            <option value="mastery">Eksik Konu</option>
          </select>
        </div>
        <div class="field">
          <label for="difficulty">Zorluk</label>
          <select id="difficulty">
            <option value="auto">Otomatik</option>
            <option value="easy">Kolay</option>
            <option value="medium">Orta</option>
            <option value="hard">Zor</option>
          </select>
        </div>
        <div class="field flex flex-col justify-end">
          <label class="toggle"><input id="ttsToggle" type="checkbox">CevaplarÄ± sesli oku</label>
        </div>
      </div>

      <div class="row actions">
        <button id="btnStart" class="btn primary">ğŸš€ Testi BaÅŸlat</button>
        <button id="btnQuick10" class="btn">ğŸ¯ 2 saatlik plan</button>
        <button id="btnRead" class="btn sm">ğŸ”Š Soruyu oku</button>
        <button id="btnVoice" class="btn sm">ğŸ™ï¸ Sesli komut</button>
      </div>
    </section>

    <section id="quizCard" class="card space-y-4" hidden>
      <div class="quiz-top">
        <span id="pillMeta" class="pill">Ders Â· Konu</span>
        <div class="quiz-right">
          <div class="scorebox">
            <div class="score">XP: <span id="xp">0</span></div>
            <div class="score">Seri: <span id="streak">0</span> gÃ¼n</div>
            <div class="score">Ä°lerleme: <span id="counter">0/0</span></div>
          </div>
          <div class="progress"><div id="bar" class="bar"></div></div>
        </div>
      </div>

      <h3 id="qTitle" class="qtitle">Soru metni</h3>
      <div id="qParagraph" class="paragraph" hidden></div>

      <div id="options" class="options"></div>

      <div id="explain" class="explain" hidden>
        <div class="explain-head">
          <span id="tagResult" class="tag">SonuÃ§</span>
          <button id="btnWhy" class="btn sm">ğŸ“Œ KazanÄ±m</button>
        </div>
        <div id="explainText" class="mt-2 leading-relaxed"></div>
        <div id="coachTip" class="coach"></div>
      </div>

      <div class="row actions">
        <div class="seg">
          <button id="btnPrev" class="seg-btn" data-mode="prev">Ã–nceki</button>
          <button id="btnSkip" class="seg-btn" data-mode="skip">Pas</button>
          <button id="btnNext" class="seg-btn" data-mode="next">Sonraki</button>
        </div>
        <button id="btnFinish" class="btn danger">ğŸ Testi Bitir</button>
      </div>
    </section>

    <section id="resultsCard" class="card space-y-4" hidden>
      <div class="flex items-center justify-between gap-3 flex-wrap">
        <h2 class="text-xl font-extrabold">SonuÃ§lar</h2>
        <div class="row">
          <button id="btnShare" class="btn sm">ğŸ“¤ PaylaÅŸ</button>
          <button id="btnRestart" class="btn sm">ğŸ”„ Yeni Test</button>
        </div>
      </div>
      <p id="summary" class="text-base"></p>
      <canvas id="chart" height="120" class="w-full"></canvas>
      <div id="topicMap" class="topics"></div>
      <div class="plan" id="plan"></div>
    </section>
  </main>

  <script src="app.js" defer></script>
</body>
</html>
